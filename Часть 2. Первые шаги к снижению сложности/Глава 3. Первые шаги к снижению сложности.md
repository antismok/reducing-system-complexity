# Глава 3. Первые шаги к снижению сложности

## 3.1 Общие инструменты снижения сложности

В данном разделе описываются основные инструменты позволяющие снизить сложность системы. Эти инструменты применимы независимо от рассматриваемого типа системы, будь то вселенная, информационная система, человеческая организация или строка кода.

## 3.1.1 Абстракция и абстрагирование

*Абстракция* это один из основных и самых мощных инструментов снижения сложности. На ее основе построены все рассматриваемые ниже инструменты.

Поскольку человек *биологически* ограничен в количестве одновременно обрабатываемой информации (см. главу 1), то для познания он использует абстракцию. Не в состоянии полностью осознать сложный элемент, люди просто игнорируют не слишком важные детали или части элемента и таким образом имеют дело с обобщенной идеализированной моделью элемента.

*Абстракция* — это такие существенные характеристики некоторого элемента, которые отличают его от всех других видов элементов и, таким образом, четко определяют особенности данного элемента с точки зрения дальнейшего рассмотрения и анализа.

*ВНИМАНИЕ!* Абстракция может как опускать некоторые детали и характеристики элемента, так и придавать новые характеристики. Более детально это будет рассмотрено немного позже.

*Абстрагирование* — это метод познания, логическое выделение, вычленение некоторых элементов конкретного множества и отвлечение их от прочих элементов данного множества. Это один из основных процессов умственной деятельности человека, опирающийся на знаковое опосредствование и позволяющий превратить в объект рассмотрения разные свойства предметов.[1]

*ВНИМАНИЕ!* Абстракцией является только такая идея, которая может быть изложена, понята и проанализирована независимо от механизма ее реализации.

## 3.1.2 Общая модель

*Модель* - это упрощённое представление системы, которое служит средством для получения информации о системе оригинале.

Как уже говорилось ранее, сложность системы зависит от человека который ее рассматривает (см. главу 1). Более того, часто сложность заключается в том, что люди, вовлеченные в работу над системой, имеют разный уровень знаний, используют разные термины одного и того же, по разному представляют реальность.

![точки зрения](Примеры/точки%20зрения.jpg)
Человек создает для себя собственную *ментальную модель*, на основе которой делает выводы и предположения.

*Ментальные модели* - основанные на предыдущем опыте идеи, стратегии, способы понимания, существующие в уме человека и направляющие его действия. Ментальные модели используются для объяснения причин и следствий. Ментальные модели являются естественными и присущи каждому человеку, вне зависимости от того, осознает он это или нет. Ментальные модели не являются неизменными.

Ментальные модели одного человека могут отличаться от ментальной модели другого человека. Все это приводит к непониманию, противоречиям и излишней сложности. Одна из основных задач аналитики - снизить сложность, превратив разные ментальные модели в одну общую, используя абстракции.

Главные критерии такой модели:
1) Модель должна иметь цель. Целью может быть получение конкретного знания о системе.
2) Модель должна быть минимально точной, но достаточной для поставленной цели. Максимально абстрактной.
3) Модель должна стать общей для всех заинтересованных.

За время существования проектирования и моделирования систем, было придумано множество разновидностей абстракций и инструментов построения моделей. Постепенно я буду рассказывать о некоторых из них и показывать их практическое применение в наиболее подходящих местах.

## 3.1.3 Аналогия

"Возможно не существует открытий ни в элементарной, ни в высшей математике, ни даже, пожалуй, в любой другой области, которые могли бы быть сделаны без аналогии". [Дьёрдь Пойа]

*Аналогия* - это прием мышления, основанный на сравнении и отождествлении. 

Когда нам сложно осознать или даже построить некоторую абстрактную модель, мы можем построить более простую модель, хорошо знакомой нам вещи, а после этого провести аналогию с рассматриваемой системой и построить уже ее.

## 3.1.4 Разделение системы на части

Первым инструментом создания абстрактных аналитических моделей который мы рассмотрим, будет иерархическая структура системы. Девиз такой модели - "Разделяй и властвуй", который подразумевает разделение некоторой сложной проблемы на более мелкие легко решаемые проблемы. Первое использование такого подхода приписывают Юлию Цезарю, который понимал, что слишком сложно завоевать Европу силами имеющимися у Рима. Вместо этого он исследовал и составил абстрактную модель Европы, состоящей на тот момент из отдельных взаимодействующих между собой кланов. Обрывая эти взаимодействия он отделял кусочек за кусочком, завоевать которые было уже не сложно силами Рима.

## 3.1.4.1 Черный ящик

Подход *чёрного ящика* сформировался в точных науках еще в 20-40 годах XX века и прекрасно подходит для моделирования случаев, когда необходимо изучить функциональность без деталей реализации.

![Черный ящик](Примеры/Черный%20ящик.svg)
*Черный ящик* - это элемент внутренняя работа которого очень сложна или неизвестна, либо знание об этом не принципиально для рассматриваемой задачи. Исходя из этого можно выделить характеристики черного ящика:
1) Известны границы и функциональное назначение.
2) Известны ожидаемые входные и выходные данные. В некоторых случаях разделения это может быть опущено для еще большего упрощения.
3) Для использования абсолютно не нужно знать, каким именно образом выполняется работа внутри.

Абстрагирование с использованием черного ящика, существенно снижает минимальный требуемый уровень знаний, тем самым снижая сложность(см. главу 1). Для работы с одним из черных ящиков и его внутренностей, не нужно ничего знать о внутренностях других ящиков.

Разделение системы на отдельные, хорошо определенные, черные ящики, *избавляет от лишнего знания*, *добавляет новое полезное знание*, *упрощает тестируемость и модифицируемость*, *повышает отказоустойчивость и надежность*.

## 3.1.4.2 Иерархия

Описание модели системы в виде черных ящиков, помогает существенно снизить сложность, однако крупные системы могут насчитывать сотни тысяч различных элементов, что совсем не укладывается в человеческое биологическое ограничение 5-7 (см. главу 1). 

 Таким образом, организация отдельных частей в виде иерархической модели системы, жизненно необходима для снижения сложности как понимания существующей системы, так и для создания новой.

*Иерархия* - это ранжирование или упорядоченная система абстракций.[7] 

*Ранжирование* - определение ранга чего-либо. *Ранг* в свою очередь может означать категорию, степень отличия, специальное звание, разряд, уровень в какой-либо иерархии, все зависит от рассматриваемого элемента.

Иерархия это абстракция поверх абстракции черного ящика, которая может многое сказать о системе даже не зная ее нюансов.

Для примера предлагаю рассмотреть иерархическую модель домашнего кинотеатра. Предположительно такая система будет состоять из следующих частей (черных ящиков): Телевизор, аудио система и аудио-видео проигрыватель.

Такой модели вполне достаточно, чтобы при первом же взгляде понять, что из себя представляет система "Домашний кинотеатр".  В сумме такая система содержит тысячи элементов, но мы абстрагируемся от этого и получаем знание о составе, всего из трех частей.

![Иерархия второго уровня](Примеры/Иерархия/Иерархия%20второго%20уровня.svg)

Если же нам потребуется информация о составе аудио-системы, то мы можем спуститься на один уровень в иерархии и понять из чего состоит конкретная часть: декодер, усилитель, колонки. 

![Иерархия третьего уровня](Примеры/Иерархия/Иерархия%20третьего%20уровня.svg)

Таким образом, мы контролируем сложность, снижая одновременное количество потребляемой информации до минимально необходимого уровня.

## 3.1.4.3 Взаимодействие

Моделирование взаимодействия позволяет получить знание о том, кем, где и как используется конкретная часть системы.

Возьмем для примера взаимодействие между частями домашнего кинотеатра. 

В первом варианте становится понятно, что аудио-видео проигрыватель служит источников сигнала для телевизора и аудио-системы. При этом телевизору передается только видео сигнал, а аудио-системе аудио сигнал.

![Передача сигнала вариант 2](Примеры/Взаимодействие/Передача%20сигнала%20вариант%202.svg)

Во втором варианте аудио-видео проигрыватель служит источником только для телевизора, а телевизор в свою очередь является транзитом аудио сигнала для аудио-системы.

![Передача сигнала вариант 1](Примеры/Взаимодействие/Передача%20сигнала%20вариант%201.svg)

Имея такою модель уже можно легко ответить на некоторые вопросы о системе и принять решение, на сколько подходит та или иная модель системы для наших нужд. 

Предположим одной из наших целей является простота поиска неисправности и в нашей системе пропал звук. 
В первом случае может быть два виновника - аудио-видео проигрыватель и аудио система. Имея под рукой другую аудио-систему, например старую, можно убедиться, что проблема в аудио-системе даже в домашних условиях.
Во втором же случае виновником может быть любая часть, что существенно затрудняет диагностику.

Если мы выяснили, что проблема в аудио-системе, то действуя тем же способом продвигаемся далее опираясь на модель взаимодействия следующего подозреваемого.

![Взаимодействие аудио системы](Примеры/Взаимодействие/Взаимодействие%20аудио%20системы.svg)

## 3.1.4.4 Все будет, но позже

Модели черного ящика, иерархии и взаимодействия помогают существенно снизить сложность осознания системы, однако не корректное разделение может свести эту пользу до нуля или даже сделать хуже. Цель этой главы только показать эти инструменты и какую пользу они могут принести в борьбе со сложностью, а методы конструирования этих моделей, возникающие проблемы зависимостей и некорректного разделения я покажу позже.

## 3.1.4 Использование аналогии и моделей для выявления проблем

Теперь когда мы рассмотрели некоторые концепции, настала пора посмотреть как же мы можем это использовать для выявления сложностей в системе.

## 3.1.4.1 Слабое звено

В этом примере будем использовать модель в виде иерархической структуры, а за основу возьмем модель организационной структуры воображаемой компании.

![Человеческая система](Примеры/Примеры%20аналогии/Слабое%20звено/Человеческая%20система.svg)

Беглый анализ такой модели позволяет выявить следующие сложности системы:
1) Система слишком сложна в части "Генеральный директор". Эта часть имеет 10 подчиненных, за каждым из которых необходимо осуществлять контроль, решать поставленные вопросы и довольно легко совершить ошибку или банально сломаться от выгорания.
2) Генерального директора сложно заменить. В случае ухода "Генерального директора" заменить его кем-то, кто сможет выполнять все тоже самое, да еще и в короткие сроки не представляется возможным.
3) В случае выхода из строя "Генерального директора", вся система становится недееспособной и компанию можно закрывать.
4) Из структуры совершенно не понятна деятельность компании.

Если на примере системы состоящей из людей очевидно, что "Генеральный директор" слабое звено системы, то проведя аналогию с информационной системой, можно увидеть те же проблемы в следующей модели.

![Информационная система](Примеры/Примеры%20аналогии/Слабое%20звено/Информационная%20система.svg)

Ведь если воспользоваться аналогией, то становится очевидно что: 
1) Корпоративная шина данных слишком сложна. Имеет слишком большую ответственность.
2) Корпоративную шину сложно заменить. Если система внезапно ушла с рынка, перестала поддерживаться и так далее, то быстро заменить ее на другую будет практически не реально.
3) В случае выхода из строя корпоративной шины, вся система останавливается.
4) Из структуры совершенно не понятна деятельность системы.

## 3.1.4.2 Лишнее звено

В этом примере рассмотрим модель взаимодействия, а за основу возьмем процесс выполнения задачи воображаемым отделом.

![Человеческая система](Примеры/Примеры%20аналогии/Лишнее%20звено/Человеческая%20система.svg)

На основе этой модели, хороший руководитель заметит, что два менеджера выполняют практически лишнюю, бесполезную работу:
1) Банально передают информацию дальше по цепочке. 
2) Это может быть игрой в сломанный телефон.
3) В такую систему сложно вносить изменения. С каждым менеджером нужно согласовать изменения.
4) У каждого из менеджеров скорее всего есть другая, важная работа, от которой он отвлекается.
Для исправления этой ситуации, руководитель снимет как минимум с одного из менеджеров эту лишнюю работу.

А теперь аналогия с информационной системой.

![Информационная система](Примеры/Примеры%20аналогии/Лишнее%20звено/Информационная%20система.svg)
Класс 1 и Класс 2, занимаются банальной передачей сообщения и по факту выполняют бесполезную, лишнюю роботу.

Как и в случае хорошего руководителя, хороший архитектор снимет лишнюю бесполезную работу минимум с одного из промежуточных классов.

## 3.1.5 Ценность проблемной модели

Не редки ситуации, когда моделирование сложной предметной области приводит к созданию проблемной модели. Однако только благодаря тому, что эта модель появилась на свет, проблема будет замечена до того, как появится на свет проблемное решение.

Таким образом, проектируя программные системы, мы можем получать обратную связь еще до того, как система будет разработана. И чем короче будет итерация получения обратной связи, тем быстрее и качественнее мы сможем осуществить поставку.

Существует не верное мнение, что проектирование, моделирование и архитектура используются только при водопадных подходах, однако это не так. Перечисленные в этой главе инструменты, позволяют работать итеративно и вкладывать минимальное количество усилий, чтобы система по итогу была минимально сложной.

С чего начать и как создавать такие модели мы рассмотрим в следующих главах.

## Дополнительная литература
1. https://ru.wikipedia.org/wiki/%D0%90%D0%B1%D1%81%D1%82%D1%80%D0%B0%D0%BA%D1%86%D0%B8%D1%8F
2. Meilir Page-Jones. The Practical Guide to Structured Systems Design. 1980 year.
3. Glenford J. Myers. Composite/structured design. 1978 year.
4. [Liskov Barbara. May 1987. Data Abstraction and Hierarchy](Liskov%20B.Data%20Abstruction%20and%20Hierarchy.pdf)
5. [Parnas D., Clements, P. The Modular Structure of complex system](Parnas%20D.,%20Clements,%20P.%20The%20Modular%20Structure%20of%20complex%20system.pdf)
6. Gannon, J. Hamlet, R. July 1987. Theory of Modules. IEEE Transactions of Software Engineering
7. [Объектно ориентированное программирование. Гради Буч](../../../Unsorted/Объектно%20ориентированное%20программирование.%20Гради%20Буч.md)